# ğŸ“ DOCUMENTAÃ‡ÃƒO TÃ‰CNICA - CARDÃPIO INTELIGENTE

## ğŸ“‹ Ãndice

1. [Diagrama de Arquitetura](#diagrama-de-arquitetura)
2. [Diagrama de Classes](#diagrama-de-classes)
3. [Diagrama de SequÃªncia](#diagrama-de-sequÃªncia)
4. [Diagrama de Casos de Uso](#diagrama-de-casos-de-uso)
5. [Modelo Entidade-Relacionamento (DER)](#modelo-entidade-relacionamento)
6. [Fluxo de Dados](#fluxo-de-dados)
7. [EspecificaÃ§Ãµes TÃ©cnicas](#especificaÃ§Ãµes-tÃ©cnicas)

---

## ğŸ—ï¸ Diagrama de Arquitetura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CAMADA DE APRESENTAÃ‡ÃƒO                      â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   Android    â”‚  â”‚   Windows    â”‚  â”‚    Tablet    â”‚            â”‚
â”‚  â”‚   (MAUI)     â”‚  â”‚   (MAUI)     â”‚  â”‚    (MAUI)    â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚         â”‚                  â”‚                  â”‚                     â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                            â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ HTTP/HTTPS + JWT
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CAMADA DE APLICAÃ‡ÃƒO (API)                      â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Controllers                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚  Usuarios    â”‚  â”‚    Pratos    â”‚  â”‚ Ingredientes â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  Controller  â”‚  â”‚  Controller  â”‚  â”‚  Controller  â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚            â”‚                  â”‚                  â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                       ServiÃ§os                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚     JWT      â”‚  â”‚    Llama     â”‚  â”‚   Validation â”‚     â”‚  â”‚
â”‚  â”‚  â”‚   Service    â”‚  â”‚   Service    â”‚  â”‚   Service    â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                â”‚                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CAMADA DE DADOS            â”‚  â”‚   CAMADA DE IA                  â”‚
â”‚                              â”‚  â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Entity Framework     â”‚  â”‚  â”‚  â”‚    LLamaSharp            â”‚ â”‚
â”‚  â”‚   Core (ORM)           â”‚  â”‚  â”‚  â”‚    (Wrapper C++)         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚              â”‚                â”‚  â”‚              â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   MySQL Database       â”‚  â”‚  â”‚  â”‚   Phi-3-mini-4k          â”‚ â”‚
â”‚  â”‚   (cardapio_db)        â”‚  â”‚  â”‚  â”‚   (modelo .gguf)         â”‚ â”‚
â”‚  â”‚                        â”‚  â”‚  â”‚  â”‚   ~2.4 GB                â”‚ â”‚
â”‚  â”‚  - usuarios            â”‚  â”‚  â”‚  â”‚   QuantizaÃ§Ã£o Q4         â”‚ â”‚
â”‚  â”‚  - pratos              â”‚  â”‚  â”‚  â”‚   4096 tokens contexto   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ Diagrama de Classes

### **Camada de Modelos (API)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Usuario                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - Id: int                                                   â”‚
â”‚ - Nome: string                                              â”‚
â”‚ - Email: string (unique)                                    â”‚
â”‚ - Senha: string                                             â”‚
â”‚ - Telefone: string                                          â”‚
â”‚ - IngredientesNaoGosta: string                              â”‚
â”‚ - Alergias: string                                          â”‚
â”‚ - DataCadastro: DateTime                                    â”‚
â”‚ - Token: string (NotMapped)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Prato                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - Id: int                                                   â”‚
â”‚ - Categoria: string                                         â”‚
â”‚ - ItemMenu: string                                          â”‚
â”‚ - Ingredientes: string                                      â”‚
â”‚ - Preco: decimal                                            â”‚
â”‚ - TemLactose: string                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        LoginDto                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - Email: string                                             â”‚
â”‚ - Senha: string                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      LoginResponse                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - Token: string                                             â”‚
â”‚ - Usuario: Usuario                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Camada de ServiÃ§os**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   <<interface>>                             â”‚
â”‚                   ILlamaService                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + GerarRespostaAsync(prompt: string): Task<string>         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–³
                            â”‚ implements
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     LlamaService                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - _executor: StatelessExecutor                              â”‚
â”‚ - _settings: LlamaSettings                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + LlamaService(settings: IOptions<LlamaSettings>)           â”‚
â”‚ + GerarRespostaAsync(prompt: string): Task<string>         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ApiService (MAUI)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - _httpClient: HttpClient                                   â”‚
â”‚ - _token: string                                            â”‚
â”‚ - _baseAddresses: string[]                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + SetToken(token: string): void                             â”‚
â”‚ + LoginAsync(email, senha): Task<LoginResponse>            â”‚
â”‚ + CadastrarUsuarioAsync(usuario): Task<bool>               â”‚
â”‚ + GetPratosAsync(alergias, categoria): Task<List<Prato>>   â”‚
â”‚ + GetIngredientesAsync(): Task<List<string>>                â”‚
â”‚ + GerarRespostaIAAsync(prompt): Task<string>                â”‚
â”‚ - SendWithFallbackAsync(...): Task<HttpResponseMessage>     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Camada de Controllers**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  UsuariosController                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - _context: AppDbContext                                    â”‚
â”‚ - _configuration: IConfiguration                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + Cadastrar(usuario: Usuario): Task<IActionResult>         â”‚
â”‚ + Login(loginDto: LoginDto): Task<IActionResult>           â”‚
â”‚ + GetUsuario(id: int): Task<IActionResult>                 â”‚
â”‚ - GerarToken(usuario: Usuario): string                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PratosController                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - _context: AppDbContext                                    â”‚
â”‚ - _llamaService: ILlamaService                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + GetPratos(alergias: string): Task<ActionResult>          â”‚
â”‚ + GerarRespostaIA(request: PromptRequest): Task<...>       â”‚
â”‚ - LimparRespostaInteligentemente(...): string              â”‚
â”‚ - ContemMultiplosPratos(...): bool                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                IngredientesController                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - _context: AppDbContext                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + GetIngredientes(): Task<ActionResult<List<string>>>      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Diagrama de SequÃªncia

### **Fluxo de Login**

```
Usuario          MAUI App         ApiService       API Controller      Database
  â”‚                 â”‚                 â”‚                  â”‚                 â”‚
  â”‚ 1. Digita       â”‚                 â”‚                  â”‚                 â”‚
  â”‚ credenciais     â”‚                 â”‚                  â”‚                 â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚                  â”‚                 â”‚
  â”‚                 â”‚ 2. LoginAsync() â”‚                  â”‚                 â”‚
  â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                 â”‚
  â”‚                 â”‚                 â”‚ 3. POST /Login   â”‚                 â”‚
  â”‚                 â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚
  â”‚                 â”‚                 â”‚                  â”‚ 4. Query        â”‚
  â”‚                 â”‚                 â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                 â”‚                 â”‚                  â”‚ 5. Usuario      â”‚
  â”‚                 â”‚                 â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                 â”‚                 â”‚                  â”‚ 6. GerarToken() â”‚
  â”‚                 â”‚                 â”‚                  â”‚â”€â”€â”€â”€â”€â”           â”‚
  â”‚                 â”‚                 â”‚                  â”‚<â”€â”€â”€â”€â”˜           â”‚
  â”‚                 â”‚                 â”‚ 7. LoginResponse â”‚                 â”‚
  â”‚                 â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
  â”‚                 â”‚ 8. SetToken()   â”‚                  â”‚                 â”‚
  â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚                 â”‚
  â”‚ 9. Navegar para â”‚                 â”‚                  â”‚                 â”‚
  â”‚ PaginaInicial   â”‚                 â”‚                  â”‚                 â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚                  â”‚                 â”‚
```

### **Fluxo de Consulta Ã  IA**

```
Usuario      MAUI App      ApiService    API Controller   LlamaService    Database    Phi-3 Model
  â”‚             â”‚              â”‚               â”‚                â”‚             â”‚             â”‚
  â”‚ 1. Pergunta â”‚              â”‚               â”‚                â”‚             â”‚             â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚              â”‚               â”‚                â”‚             â”‚             â”‚
  â”‚             â”‚ 2. GerarIA() â”‚               â”‚                â”‚             â”‚             â”‚
  â”‚             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚                â”‚             â”‚             â”‚
  â”‚             â”‚              â”‚ 3. POST       â”‚                â”‚             â”‚             â”‚
  â”‚             â”‚              â”‚ /assistente   â”‚                â”‚             â”‚             â”‚
  â”‚             â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                â”‚             â”‚             â”‚
  â”‚             â”‚              â”‚               â”‚ 4. Query Pratosâ”‚             â”‚             â”‚
  â”‚             â”‚              â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚             â”‚             â”‚
  â”‚             â”‚              â”‚               â”‚ 5. List<Prato> â”‚             â”‚             â”‚
  â”‚             â”‚              â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚             â”‚
  â”‚             â”‚              â”‚               â”‚ 6. Montar      â”‚             â”‚             â”‚
  â”‚             â”‚              â”‚               â”‚ Prompt         â”‚             â”‚             â”‚
  â”‚             â”‚              â”‚               â”‚â”€â”€â”€â”€â”           â”‚             â”‚             â”‚
  â”‚             â”‚              â”‚               â”‚<â”€â”€â”€â”˜           â”‚             â”‚             â”‚
  â”‚             â”‚              â”‚               â”‚ 7. GerarResposta()          â”‚             â”‚
  â”‚             â”‚              â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚             â”‚             â”‚
  â”‚             â”‚              â”‚               â”‚                â”‚ 8. Inferir â”‚             â”‚
  â”‚             â”‚              â”‚               â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚             â”‚
  â”‚             â”‚              â”‚               â”‚                â”‚             â”‚ 9. Process â”‚
  â”‚             â”‚              â”‚               â”‚                â”‚             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚             â”‚              â”‚               â”‚                â”‚             â”‚ 10. Tokens â”‚
  â”‚             â”‚              â”‚               â”‚                â”‚             â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚             â”‚              â”‚               â”‚                â”‚ 11. Respostaâ”‚             â”‚
  â”‚             â”‚              â”‚               â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
  â”‚             â”‚              â”‚               â”‚ 12. Limpar     â”‚             â”‚             â”‚
  â”‚             â”‚              â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚             â”‚
  â”‚             â”‚              â”‚ 13. JSON      â”‚                â”‚             â”‚             â”‚
  â”‚             â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚             â”‚             â”‚
  â”‚             â”‚ 14. String   â”‚               â”‚                â”‚             â”‚             â”‚
  â”‚             â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚                â”‚             â”‚             â”‚
  â”‚ 15. Exibir  â”‚              â”‚               â”‚                â”‚             â”‚             â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚               â”‚                â”‚             â”‚             â”‚
```

---

## ğŸ‘¤ Diagrama de Casos de Uso

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Sistema CardÃ¡pio Inteligente      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                           â”‚                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UsuÃ¡rio Novo  â”‚         â”‚ UsuÃ¡rio Logado  â”‚         â”‚  Administrador â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                           â”‚                           â”‚
        â”‚                           â”‚                           â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
   â”‚ Cadastrarâ”‚              â”‚ Fazer Login â”‚            â”‚ Gerenciar   â”‚
   â”‚ Conta    â”‚              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚ Pratos      â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                     â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                           â”‚
        â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚                                 â”‚
        â”‚              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              â”‚ Ver       â”‚                  â”‚ Filtrar Pratos  â”‚
        â”‚              â”‚ CardÃ¡pio  â”‚                  â”‚ por Alergia     â”‚
        â”‚              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                    â”‚                                 â”‚
        â”‚              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
        â”‚              â”‚                                             â”‚
        â”‚         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
        â”‚         â”‚ Consultar   â”‚                        â”‚ Conversar com IA â”‚
        â”‚         â”‚ Ingredientesâ”‚                        â”‚ (Chat)           â”‚
        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                                           â”‚
                                                                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                                                                    â”‚ Informar    â”‚
                                                                    â”‚ PreferÃªnciasâ”‚
                                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **DescriÃ§Ã£o dos Casos de Uso**

#### **UC01 - Cadastrar Conta**
- **Ator**: UsuÃ¡rio Novo
- **PrÃ©-condiÃ§Ã£o**: Nenhuma
- **Fluxo Principal**:
  1. UsuÃ¡rio acessa tela de cadastro
  2. Sistema solicita dados (nome, email, senha, telefone)
  3. Sistema solicita ingredientes que nÃ£o gosta
  4. Sistema solicita alergias/intolerÃ¢ncias
  5. UsuÃ¡rio confirma cadastro
  6. Sistema valida dados
  7. Sistema salva no banco de dados
  8. Sistema redireciona para login
- **PÃ³s-condiÃ§Ã£o**: UsuÃ¡rio cadastrado no sistema

#### **UC02 - Fazer Login**
- **Ator**: UsuÃ¡rio Logado
- **PrÃ©-condiÃ§Ã£o**: UsuÃ¡rio cadastrado
- **Fluxo Principal**:
  1. UsuÃ¡rio informa email e senha
  2. Sistema valida credenciais
  3. Sistema gera token JWT
  4. Sistema retorna token e dados do usuÃ¡rio
  5. Sistema redireciona para pÃ¡gina inicial
- **PÃ³s-condiÃ§Ã£o**: UsuÃ¡rio autenticado

#### **UC03 - Ver CardÃ¡pio**
- **Ator**: UsuÃ¡rio Logado
- **PrÃ©-condiÃ§Ã£o**: UsuÃ¡rio autenticado
- **Fluxo Principal**:
  1. Sistema busca pratos no banco de dados
  2. Sistema exibe lista de pratos
  3. UsuÃ¡rio visualiza informaÃ§Ãµes (nome, preÃ§o, ingredientes, lactose)
- **PÃ³s-condiÃ§Ã£o**: CardÃ¡pio exibido

#### **UC04 - Filtrar Pratos por Alergia**
- **Ator**: UsuÃ¡rio Logado
- **PrÃ©-condiÃ§Ã£o**: UsuÃ¡rio autenticado
- **Fluxo Principal**:
  1. UsuÃ¡rio seleciona filtro "Sem Lactose"
  2. Sistema filtra pratos onde TemLactose = "NÃ£o"
  3. Sistema exibe apenas pratos filtrados
- **PÃ³s-condiÃ§Ã£o**: Lista filtrada exibida

#### **UC05 - Conversar com IA**
- **Ator**: UsuÃ¡rio Logado
- **PrÃ©-condiÃ§Ã£o**: UsuÃ¡rio autenticado, modelo IA carregado
- **Fluxo Principal**:
  1. UsuÃ¡rio digita pergunta sobre cardÃ¡pio
  2. Sistema envia pergunta para API
  3. API busca pratos relevantes no banco
  4. API monta prompt contextualizado
  5. API envia prompt para modelo Phi-3
  6. Modelo gera resposta
  7. API limpa e formata resposta
  8. Sistema exibe resposta ao usuÃ¡rio
- **PÃ³s-condiÃ§Ã£o**: Resposta da IA exibida

---

## ğŸ—„ï¸ Modelo Entidade-Relacionamento (DER)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USUARIOS                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK â”‚ Id                    INT AUTO_INCREMENT               â”‚
â”‚    â”‚ Nome                  VARCHAR(255) NOT NULL            â”‚
â”‚ UK â”‚ Email                 VARCHAR(150) NOT NULL UNIQUE     â”‚
â”‚    â”‚ Senha                 VARCHAR(255) NOT NULL            â”‚
â”‚    â”‚ Telefone              VARCHAR(20)                      â”‚
â”‚    â”‚ IngredientesNaoGosta  TEXT                             â”‚
â”‚    â”‚ Alergias              VARCHAR(255)                     â”‚
â”‚    â”‚ DataCadastro          DATETIME NOT NULL                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ (NÃ£o hÃ¡ FK direta, mas hÃ¡
                                â”‚  relaÃ§Ã£o lÃ³gica via Alergias)
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          PRATOS                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK â”‚ Id                    INT AUTO_INCREMENT               â”‚
â”‚    â”‚ Categoria             VARCHAR(100) NOT NULL            â”‚
â”‚    â”‚ Item_Menu             VARCHAR(255) NOT NULL            â”‚
â”‚    â”‚ Ingredientes          TEXT                             â”‚
â”‚    â”‚ Preco                 DECIMAL(18,2) NOT NULL           â”‚
â”‚    â”‚ Tem_Lactose           VARCHAR(20) DEFAULT 'Desconhecido'â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ãndices:
- usuarios: idx_email (Email)
- pratos: idx_categoria (Categoria), idx_lactose (Tem_Lactose)

Relacionamentos:
- NÃ£o hÃ¡ FK explÃ­cita, mas hÃ¡ relaÃ§Ã£o lÃ³gica:
  * Usuario.Alergias â†’ Pratos.Tem_Lactose (filtro)
  * Usuario.IngredientesNaoGosta â†’ Pratos.Ingredientes (filtro futuro)
```

### **Cardinalidade**

```
USUARIOS (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (N) CONSULTAS_IA (futura)
                            â”‚
                            â”‚ (N)
                            â”‚
                        (N) PRATOS
```

**Nota**: Atualmente nÃ£o hÃ¡ tabela de histÃ³rico de consultas, mas seria uma melhoria futura.

---

## ğŸ“Š Fluxo de Dados

### **1. Fluxo de AutenticaÃ§Ã£o**

```
[MAUI] â”€â”€(email, senha)â”€â”€> [API] â”€â”€(query)â”€â”€> [MySQL]
                                                  â”‚
                                                  â”‚ (usuario)
                                                  â–¼
[MAUI] <â”€â”€(token, usuario)â”€â”€ [API] <â”€â”€(usuario)â”€â”€ [MySQL]
  â”‚
  â”‚ (armazena token)
  â–¼
[Preferences]
```

### **2. Fluxo de Listagem de Pratos**

```
[MAUI] â”€â”€(GET /api/Pratos?alergias=lactose)â”€â”€> [API]
                                                  â”‚
                                                  â”‚ (query com filtro)
                                                  â–¼
[MAUI] <â”€â”€(List<Prato>)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [MySQL]
  â”‚
  â”‚ (renderiza)
  â–¼
[CollectionView]
```

### **3. Fluxo de Consulta Ã  IA**

```
[MAUI] â”€â”€(prompt)â”€â”€> [API] â”€â”€(query pratos)â”€â”€> [MySQL]
                       â”‚                          â”‚
                       â”‚                          â”‚ (pratos)
                       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ (monta prompt contextualizado)
                       â–¼
                   [LlamaService]
                       â”‚
                       â”‚ (inferÃªncia)
                       â–¼
                   [Phi-3 Model]
                       â”‚
                       â”‚ (tokens)
                       â–¼
                   [LlamaService]
                       â”‚
                       â”‚ (limpa resposta)
                       â–¼
[MAUI] <â”€â”€(resposta)â”€â”€ [API]
  â”‚
  â”‚ (exibe)
  â–¼
[Label/Chat]
```

---

## ğŸ”§ EspecificaÃ§Ãµes TÃ©cnicas

### **Requisitos de Hardware**

#### **Servidor (API + IA)**
| Componente | MÃ­nimo | Recomendado |
|------------|--------|-------------|
| CPU | 4 cores | 6+ cores |
| RAM | 8 GB | 16 GB |
| Disco | 5 GB livres | 10 GB SSD |
| GPU | NÃ£o necessÃ¡rio | NVIDIA (opcional) |

#### **Cliente (MAUI)**
| Plataforma | Requisitos |
|------------|------------|
| Windows | Windows 10 (1809+) / Windows 11 |
| Android | Android 5.0+ (API 21+) |
| Tablet | Android 5.0+ ou Windows 10+ |

### **Requisitos de Software**

#### **Desenvolvimento**
- Visual Studio 2022 (17.8+)
- .NET 8 SDK
- .NET 9 SDK
- MySQL Server 8.0+
- Git

#### **ProduÃ§Ã£o**
- .NET 8 Runtime (API)
- .NET 9 Runtime (MAUI)
- MySQL Server 8.0+
- Modelo Phi-3 (~2.4 GB)

### **Portas Utilizadas**

| ServiÃ§o | Porta | Protocolo |
|---------|-------|-----------|
| API HTTP | 5068 | HTTP |
| API HTTPS | 7068 | HTTPS |
| MySQL | 3306 | TCP |
| Swagger | 5068/swagger | HTTP |

### **ConfiguraÃ§Ãµes de SeguranÃ§a**

#### **JWT**
- **Algoritmo**: HMAC-SHA256
- **Validade**: 2 horas
- **Claims**: Id, Nome, Email, Alergias
- **Secret**: ConfigurÃ¡vel em appsettings.json

#### **CORS**
- **Origens permitidas**: ConfigurÃ¡vel
- **MÃ©todos**: GET, POST, PUT, DELETE
- **Headers**: Authorization, Content-Type

### **ConfiguraÃ§Ãµes de IA**

| ParÃ¢metro | Valor PadrÃ£o | DescriÃ§Ã£o |
|-----------|--------------|-----------|
| ModelPath | ModelosIA/Phi-3-mini-4k-instruct-q4.gguf | Caminho do modelo |
| MaxTokens | 512 | MÃ¡ximo de tokens gerados |
| Temperature | 0.8 | Criatividade (0.7-1.1) |
| TopP | 0.9 | Diversidade (0.85-0.95) |
| GpuLayerCount | 0 | Camadas na GPU (0 = CPU) |
| NumThreads | 4 | Threads da CPU |
| ContextSize | 4096 | Tamanho do contexto |

### **Tempo de Resposta Esperado**

| OperaÃ§Ã£o | Tempo MÃ©dio |
|----------|-------------|
| Login | < 500ms |
| Listar Pratos | < 300ms |
| Filtrar Pratos | < 200ms |
| Consulta IA (CPU) | 5-15s |
| Consulta IA (GPU) | 1-3s |

---

## ğŸ“ˆ MÃ©tricas de Qualidade

### **Cobertura de CÃ³digo**
- **Meta**: 70%+ (nÃ£o implementado ainda)
- **Ãreas crÃ­ticas**: Controllers, Services

### **Complexidade CiclomÃ¡tica**
- **Meta**: < 10 por mÃ©todo
- **MÃ©todos complexos**: LimparRespostaInteligentemente (15)

### **Linhas de CÃ³digo**
- **API**: ~1500 linhas
- **MAUI**: ~1200 linhas
- **Total**: ~2700 linhas

### **DependÃªncias**
- **API**: 8 pacotes NuGet
- **MAUI**: 3 pacotes NuGet

---

## ğŸ”„ Versionamento

### **HistÃ³rico de VersÃµes**

| VersÃ£o | Data | MudanÃ§as |
|--------|------|----------|
| 1.0.0 | 2024-11-19 | VersÃ£o inicial para TCC |

### **Branches**
- `main`: VersÃ£o estÃ¡vel
- `develop`: Desenvolvimento
- `feature/*`: Novas funcionalidades

---

## ğŸ“š ReferÃªncias TÃ©cnicas

1. **Microsoft .NET MAUI**: https://learn.microsoft.com/dotnet/maui/
2. **Entity Framework Core**: https://learn.microsoft.com/ef/core/
3. **LLamaSharp**: https://github.com/SciSharp/LLamaSharp
4. **Phi-3 Model**: https://huggingface.co/microsoft/Phi-3-mini-4k-instruct-gguf
5. **JWT**: https://jwt.io/
6. **MySQL**: https://dev.mysql.com/doc/

---

**Documento gerado em**: 19/11/2024  
**VersÃ£o**: 1.0  
**Autor**: Eduardo Bonaci
